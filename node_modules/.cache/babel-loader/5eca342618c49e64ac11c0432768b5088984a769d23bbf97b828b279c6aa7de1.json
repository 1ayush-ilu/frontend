{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import{io}from\"socket.io-client\";import api from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io(process.env.REACT_APP_API.replace(\"/api\",\"\"),{transports:[\"websocket\"]});export default function Leaderboard(){const{id}=useParams();const[rows,setRows]=useState([]);const load=async()=>{const{data}=await api.get(\"/\".concat(id,\"/leaderboard\"));setRows(data);};useEffect(()=>{load();socket.emit(\"quiz:join\",id);const handler=p=>{if(String(p.quizId)===String(id))load();};socket.on(\"leaderboard:update\",handler);return()=>socket.off(\"leaderboard:update\",handler);},[id]);return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Leaderboard\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"th\",children:\"Rank\"}),/*#__PURE__*/_jsx(\"th\",{className:\"th\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{className:\"th\",children:\"Score\"}),/*#__PURE__*/_jsx(\"th\",{className:\"th\",children:\"Time\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows.map(r=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:r.rank}),/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:r.name}),/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:r.score}),/*#__PURE__*/_jsx(\"td\",{className:\"td\",children:new Date(r.submittedAt).toLocaleTimeString()})]},r.rank))})]}),/*#__PURE__*/_jsx(\"a\",{className:\"btn mt-4 inline-block\",href:\"\".concat(process.env.REACT_APP_API,\"/quiz/\").concat(id,\"/export\"),target:\"_blank\",rel:\"noreferrer\",children:\"Export CSV\"})]})});}","map":{"version":3,"names":["React","useEffect","useState","useParams","io","api","jsx","_jsx","jsxs","_jsxs","socket","process","env","REACT_APP_API","replace","transports","Leaderboard","id","rows","setRows","load","data","get","concat","emit","handler","p","String","quizId","on","off","className","children","map","r","rank","name","score","Date","submittedAt","toLocaleTimeString","href","target","rel"],"sources":["C:/Users/dell/Desktop/final/frontend/src/pages/Leaderboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { io } from \"socket.io-client\";\nimport api from \"../api\";\n\nconst socket = io(process.env.REACT_APP_API.replace(\"/api\",\"\"), { transports: [\"websocket\"] });\n\nexport default function Leaderboard() {\n  const { id } = useParams();\n  const [rows, setRows] = useState([]);\n\n  const load = async () => {\n    const { data } = await api.get(`/${id}/leaderboard`);\n    setRows(data);\n  };\n\n  useEffect(() => {\n    load();\n    socket.emit(\"quiz:join\", id);\n    const handler = (p) => { if (String(p.quizId) === String(id)) load(); };\n    socket.on(\"leaderboard:update\", handler);\n    return () => socket.off(\"leaderboard:update\", handler);\n  }, [id]);\n\n  return (\n    <div className=\"container\">\n      <div className=\"card\">\n        <h2 className=\"text-2xl font-bold mb-4\">Leaderboard</h2>\n        <table className=\"table\">\n          <thead><tr><th className=\"th\">Rank</th><th className=\"th\">Name</th><th className=\"th\">Score</th><th className=\"th\">Time</th></tr></thead>\n          <tbody>\n            {rows.map(r => <tr key={r.rank}><td className=\"td\">{r.rank}</td><td className=\"td\">{r.name}</td><td className=\"td\">{r.score}</td><td className=\"td\">{new Date(r.submittedAt).toLocaleTimeString()}</td></tr>)}\n          </tbody>\n        </table>\n        <a className=\"btn mt-4 inline-block\" href={`${process.env.REACT_APP_API}/quiz/${id}/export`} target=\"_blank\" rel=\"noreferrer\">Export CSV</a>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}