{"ast":null,"code":"import React,{useState}from\"react\";import api from\"../api\";import{motion}from\"framer-motion\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreateQuiz(){const[title,setTitle]=useState(\"\");const[prompt,setPrompt]=useState(\"\");const[emails,setEmails]=useState(\"\");const[created,setCreated]=useState(null);const[msg,setMsg]=useState(\"\");// ‚úÖ Create quiz\nconst create=async()=>{try{const{data}=await api.post(\"/quiz\",{title,prompt});// ‚úÖ Fix: some backends return { quiz: {...} }, others just {...}\nsetCreated(data.quiz||data);console.log(\"Quiz created:\",data.quiz||data);// Debug\n}catch(err){console.error(\"Error creating quiz:\",err);}};// ‚úÖ Send invites\nconst sendInvites=async()=>{if(!created)return;try{console.log(\"Sending invites for quiz ID:\",created._id);// Debug\nconst arr=emails.split(\",\").map(s=>s.trim()).filter(Boolean);const{data}=await api.post(\"/quiz/\".concat(created._id,\"/invite\"),{emails:arr});setMsg(\"Invites sent: \".concat(data.sent));}catch(err){console.error(\"Error sending invites:\",err);setMsg(\"‚ùå Failed to send invites. Check server logs.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(motion.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Create Quiz\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"input\",placeholder:\"Quiz Title\",value:title,onChange:e=>setTitle(e.target.value)}),/*#__PURE__*/_jsx(\"textarea\",{className:\"input h-32\",placeholder:\"Prompt or topics (comma-separated)\",value:prompt,onChange:e=>setPrompt(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:create,children:\"Generate & Create\"})]}),created&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg\",children:[\"\\uD83C\\uDF89 \",/*#__PURE__*/_jsx(\"b\",{children:\"Quiz Created:\"}),\" \",created.title]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm opacity-80\",children:\"Share link:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(process.env.REACT_APP_CLIENT,\"/quiz/\").concat(created._id),target:\"_blank\",rel:\"noreferrer\",children:\"\".concat(process.env.REACT_APP_CLIENT,\"/quiz/\").concat(created._id)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card space-y-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:\"Send Email Invites\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input\",placeholder:\"email1, email2, ...\",value:emails,onChange:e=>setEmails(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:sendInvites,children:\"Send Invites\"}),msg&&/*#__PURE__*/_jsx(\"p\",{className:\"text-emerald-300\",children:msg})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>navigator.clipboard.writeText(\"\".concat(process.env.REACT_APP_CLIENT,\"/quiz/\").concat(created._id)),children:\"Copy link\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>window.open(\"\".concat(process.env.REACT_APP_CLIENT,\"/quiz/\").concat(created._id),\"_blank\"),children:\"Open\"})]})]})]})]})});}","map":{"version":3,"names":["React","useState","api","motion","jsx","_jsx","jsxs","_jsxs","CreateQuiz","title","setTitle","prompt","setPrompt","emails","setEmails","created","setCreated","msg","setMsg","create","data","post","quiz","console","log","err","error","sendInvites","_id","arr","split","map","s","trim","filter","Boolean","concat","sent","className","children","div","initial","y","opacity","animate","placeholder","value","onChange","e","target","onClick","href","process","env","REACT_APP_CLIENT","rel","navigator","clipboard","writeText","window","open"],"sources":["C:/Users/dell/Desktop/final/frontend/src/pages/CreateQuiz.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport api from \"../api\";\nimport { motion } from \"framer-motion\";\n\nexport default function CreateQuiz() {\n  const [title, setTitle] = useState(\"\");\n  const [prompt, setPrompt] = useState(\"\");\n  const [emails, setEmails] = useState(\"\");\n  const [created, setCreated] = useState(null);\n  const [msg, setMsg] = useState(\"\");\n\n  // ‚úÖ Create quiz\n  const create = async () => {\n    try {\n      const { data } = await api.post(\"/quiz\", { title, prompt });\n\n      // ‚úÖ Fix: some backends return { quiz: {...} }, others just {...}\n      setCreated(data.quiz || data);\n\n      console.log(\"Quiz created:\", data.quiz || data); // Debug\n    } catch (err) {\n      console.error(\"Error creating quiz:\", err);\n    }\n  };\n\n  // ‚úÖ Send invites\n  const sendInvites = async () => {\n    if (!created) return;\n    try {\n      console.log(\"Sending invites for quiz ID:\", created._id); // Debug\n\n      const arr = emails.split(\",\").map((s) => s.trim()).filter(Boolean);\n      const { data } = await api.post(`/quiz/${created._id}/invite`, { emails: arr });\n\n      setMsg(`Invites sent: ${data.sent}`);\n    } catch (err) {\n      console.error(\"Error sending invites:\", err);\n      setMsg(\"‚ùå Failed to send invites. Check server logs.\");\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <motion.div\n        initial={{ y: 10, opacity: 0 }}\n        animate={{ y: 0, opacity: 1 }}\n        className=\"card\"\n      >\n        <h2 className=\"text-2xl font-bold mb-4\">Create Quiz</h2>\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          {/* Create Quiz Form */}\n          <div className=\"space-y-3\">\n            <input\n              className=\"input\"\n              placeholder=\"Quiz Title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n            />\n            <textarea\n              className=\"input h-32\"\n              placeholder=\"Prompt or topics (comma-separated)\"\n              value={prompt}\n              onChange={(e) => setPrompt(e.target.value)}\n            />\n            <button className=\"btn\" onClick={create}>\n              Generate & Create\n            </button>\n          </div>\n\n          {/* Show Created Quiz + Invite Section */}\n          {created && (\n            <div className=\"space-y-3\">\n              <div className=\"card\">\n                <p className=\"text-lg\">\n                  üéâ <b>Quiz Created:</b> {created.title}\n                </p>\n                <p className=\"text-sm opacity-80\">Share link:</p>\n                <div className=\"input\">\n                  <a href={`${process.env.REACT_APP_CLIENT}/quiz/${created._id}`} target=\"_blank\" rel=\"noreferrer\">{`${process.env.REACT_APP_CLIENT}/quiz/${created._id}`}</a>\n                </div>\n              </div>\n\n              <div className=\"card space-y-2\">\n                <h3 className=\"font-semibold\">Send Email Invites</h3>\n                <input\n                  className=\"input\"\n                  placeholder=\"email1, email2, ...\"\n                  value={emails}\n                  onChange={(e) => setEmails(e.target.value)}\n                />\n                <button className=\"btn\" onClick={sendInvites}>\n                  Send Invites\n                </button>\n                {msg && <p className=\"text-emerald-300\">{msg}</p>}\n              </div>\n              <div className=\"flex gap-2 mt-2\">\n                <button className=\"btn\" onClick={() => navigator.clipboard.writeText(`${process.env.REACT_APP_CLIENT}/quiz/${created._id}`)}>Copy link</button>\n                <button className=\"btn\" onClick={() => window.open(`${process.env.REACT_APP_CLIENT}/quiz/${created._id}`, \"_blank\")}>Open</button>\n              </div>\n            </div>\n          )}\n        </div>\n      </motion.div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}